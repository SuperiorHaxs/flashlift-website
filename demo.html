<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="FlashLift">
    <meta name="theme-color" content="#6366F1">
    <meta name="description" content="Learn in seconds with AI-powered flashcards">
    <title>FlashLift</title>
    
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiRmxhc2hMaWZ0Iiwic2hvcnRfbmFtZSI6IkZsYXNoTGlmdCIsImRlc2NyaXB0aW9uIjoiTGVhcm4gaW4gc2Vjb25kcyB3aXRoIEFJLXBvd2VyZWQgZmxhc2hjYXJkcyIsInN0YXJ0X3VybCI6Ii8iLCJkaXNwbGF5Ijoic3RhbmRhbG9uZSIsImJhY2tncm91bmRfY29sb3IiOiIjZjhmYWZjIiwidGhlbWVfY29sb3IiOiIjNjM2NkYxIiwib3JpZW50YXRpb24iOiJwb3J0cmFpdCJ9">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%236366F1' width='100' height='100' rx='20'/><text x='50' y='65' text-anchor='middle' font-size='50'>âš¡</text></svg>">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        *{-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}
        html,body,#root{height:100%;overflow:hidden;overscroll-behavior:none}
        body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;padding-top:env(safe-area-inset-top);padding-bottom:env(safe-area-inset-bottom);padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right)}
        .card-flip{transform-style:preserve-3d;transition:transform 0.5s ease-out}
        .card-flip.flipped{transform:rotateY(180deg)}
        .card-front,.card-back{backface-visibility:hidden}
        .card-back{transform:rotateY(180deg)}
        .gradient-primary{background:linear-gradient(135deg,#6366F1 0%,#8B5CF6 100%)}
        .gradient-success{background:linear-gradient(135deg,#22C55E 0%,#06B6D4 100%)}
        .gradient-streak{background:linear-gradient(135deg,#F59E0B 0%,#EF4444 100%)}
        .safe-bottom{padding-bottom:max(env(safe-area-inset-bottom),20px)}
        @keyframes celebrate{0%{transform:scale(1)}50%{transform:scale(1.1)}100%{transform:scale(1)}}.celebrate{animation:celebrate 0.5s ease-in-out}
        input,textarea{-webkit-user-select:text;user-select:text}
    </style>
</head>
<body class="bg-slate-50">
    <div id="root"></div>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script type="text/babel">
        const{useState,useEffect,useRef}=React;
        const sampleDecks={biology:{name:'Biology Fundamentals',emoji:'ğŸ§¬',color:'#22C55E',subject:'biology',cards:[{id:'bio-1',q:'What is the powerhouse of the cell?',a:'The mitochondria. It produces ATP through cellular respiration.'},{id:'bio-2',q:'What is DNA?',a:'Deoxyribonucleic acid - carries genetic instructions for development and reproduction.'},{id:'bio-3',q:'What is the difference between mitosis and meiosis?',a:'Mitosis: 2 identical cells (growth/repair). Meiosis: 4 different cells (reproduction).'},{id:'bio-4',q:'What are the four nucleotide bases in DNA?',a:'Adenine (A), Thymine (T), Guanine (G), Cytosine (C). A pairs with T, G pairs with C.'},{id:'bio-5',q:'What is photosynthesis?',a:'Plants convert sunlight, water, and CO2 into glucose and oxygen.'},{id:'bio-6',q:'What is natural selection?',a:'Organisms better adapted to their environment survive and reproduce more.'},{id:'bio-7',q:'What is homeostasis?',a:'Maintenance of stable internal conditions despite external changes.'},{id:'bio-8',q:'What is cellular respiration?',a:'Breaking down glucose to produce ATP: C6H12O6 + 6O2 â†’ 6CO2 + 6H2O + ATP'}]},spanish:{name:'Spanish Essentials',emoji:'ğŸ‡ªğŸ‡¸',color:'#EF4444',subject:'spanish',cards:[{id:'spa-1',q:'How do you say "Hello" in Spanish?',a:'Hola'},{id:'spa-2',q:'How do you say "Thank you"?',a:'Gracias'},{id:'spa-3',q:'How do you say "Good morning"?',a:'Buenos dÃ­as'},{id:'spa-4',q:'How do you say "How are you?"',a:'Â¿CÃ³mo estÃ¡s? (informal) / Â¿CÃ³mo estÃ¡ usted? (formal)'},{id:'spa-5',q:'Count 1-5 in Spanish',a:'Uno, dos, tres, cuatro, cinco'},{id:'spa-6',q:'How do you say "Please"?',a:'Por favor'},{id:'spa-7',q:'How do you say "Goodbye"?',a:'AdiÃ³s / Hasta luego'},{id:'spa-8',q:'What does "agua" mean?',a:'Water'}]},history:{name:'World History',emoji:'ğŸ“œ',color:'#F59E0B',subject:'history',cards:[{id:'his-1',q:'When did World War II end?',a:'1945 - Germany surrendered in May, Japan in August.'},{id:'his-2',q:'What was the Renaissance?',a:'Cultural movement (14th-17th century) from Italy. Art, science, humanism.'},{id:'his-3',q:'When did the French Revolution begin?',a:'1789 - Storming of the Bastille on July 14th.'},{id:'his-4',q:'What caused World War I?',a:'Franz Ferdinand assassination + MAIN: Militarism, Alliances, Imperialism, Nationalism.'},{id:'his-5',q:'When did the Berlin Wall fall?',a:'November 9, 1989. Led to German reunification.'},{id:'his-6',q:'What was the Industrial Revolution?',a:'Major industrialization (1760-1840) starting in Britain.'},{id:'his-7',q:'Who was Alexander the Great?',a:"King of Macedonia who created one of history's largest empires."}]},programming:{name:'Programming 101',emoji:'ğŸ’»',color:'#6366F1',subject:'programming',cards:[{id:'prog-1',q:'What is a variable?',a:'A named storage location in memory that holds a changeable value.'},{id:'prog-2',q:'What is an API?',a:'Application Programming Interface - protocols for software communication.'},{id:'prog-3',q:'What is recursion?',a:'A function calling itself to solve smaller subproblems.'},{id:'prog-4',q:'What is Big O notation?',a:'Describes algorithm complexity. Examples: O(1), O(n), O(nÂ²).'},{id:'prog-5',q:'Stack vs Queue?',a:'Stack: LIFO (Last In, First Out). Queue: FIFO (First In, First Out).'},{id:'prog-6',q:'What is OOP?',a:'Object-Oriented Programming: encapsulation, inheritance, polymorphism.'},{id:'prog-7',q:'What is Git?',a:'Distributed version control system for tracking code changes.'}]},chemistry:{name:'Chemistry Basics',emoji:'âš—ï¸',color:'#8B5CF6',subject:'chemistry',cards:[{id:'chem-1',q:'What is an atom?',a:'Smallest unit of matter. Contains protons, neutrons, electrons.'},{id:'chem-2',q:'What is pH?',a:'Scale (0-14) measuring acidity. 7 is neutral, <7 acidic, >7 basic.'},{id:'chem-3',q:'What is a chemical bond?',a:'Attraction between atoms. Types: ionic, covalent, metallic.'},{id:'chem-4',q:"What is Avogadro's number?",a:'6.022 Ã— 10Â²Â³ - particles in one mole.'},{id:'chem-5',q:'Chemical formula for water?',a:'Hâ‚‚O - two hydrogen atoms bonded to one oxygen.'},{id:'chem-6',q:'Three states of matter?',a:'Solid, Liquid, Gas'}]},geography:{name:'World Geography',emoji:'ğŸŒ',color:'#06B6D4',subject:'geography',cards:[{id:'geo-1',q:'Largest country by area?',a:'Russia - approximately 17.1 million kmÂ²'},{id:'geo-2',q:'Longest river?',a:'The Nile - approximately 6,650 km'},{id:'geo-3',q:'Highest mountain?',a:'Mount Everest - 8,849 meters'},{id:'geo-4',q:'Seven continents?',a:'Africa, Antarctica, Asia, Australia, Europe, North America, South America'},{id:'geo-5',q:'Capital of Japan?',a:'Tokyo'},{id:'geo-6',q:'Smallest country?',a:'Vatican City - 0.44 kmÂ²'}]}};
        const processReview=(card,quality)=>{let{repetitions=0,easeFactor=2.5,interval=0}=card;if(quality<3){repetitions=0;interval=1}else{if(repetitions===0)interval=1;else if(repetitions===1)interval=6;else interval=Math.round(interval*easeFactor);repetitions++}easeFactor=Math.max(1.3,easeFactor+(0.1-(5-quality)*(0.08+(5-quality)*0.02)));return{...card,repetitions,easeFactor,interval,nextReview:new Date(Date.now()+interval*86400000).toISOString()}};
        const getDueCards=cards=>{const now=new Date();return cards.filter(c=>!c.nextReview||new Date(c.nextReview)<=now)};
        const save=(k,v)=>{try{localStorage.setItem('fl_'+k,JSON.stringify(v))}catch(e){}};
        const load=(k,d)=>{try{const v=localStorage.getItem('fl_'+k);return v?JSON.parse(v):d}catch(e){return d}};
        const haptic=(type='light')=>{if('vibrate'in navigator)navigator.vibrate(type==='light'?10:type==='medium'?20:30)};
        
        function FlashLiftApp(){
          const[screen,setScreen]=useState('loading');
          const[step,setStep]=useState(0);
          const[tab,setTab]=useState('home');
          const[settings,setSettings]=useState({apiKey:'',dailyGoal:20,interests:[],onboarded:false});
          const[decks,setDecks]=useState([]);
          const[currentDeck,setCurrentDeck]=useState(null);
          const[studyCards,setStudyCards]=useState([]);
          const[cardIndex,setCardIndex]=useState(0);
          const[flipped,setFlipped]=useState(false);
          const[stats,setStats]=useState({todayReviewed:0,todayCorrect:0,streak:0,lastStudyDate:null,totalReviewed:0});
          const[generating,setGenerating]=useState(false);
          const[genTopic,setGenTopic]=useState('');
          const[genCount,setGenCount]=useState(10);
          const[genError,setGenError]=useState('');
          const[modal,setModal]=useState(null);
          const[newCard,setNewCard]=useState({q:'',a:''});
          const[toast,setToast]=useState(null);

          useEffect(()=>{const s=load('settings',null);const d=load('decks',null);const st=load('stats',null);if(s)setSettings(s);if(d)setDecks(d);if(st){const today=new Date().toDateString();if(st.lastStudyDate!==today){const yesterday=new Date(Date.now()-86400000).toDateString();setStats({...st,todayReviewed:0,todayCorrect:0,streak:st.lastStudyDate===yesterday?st.streak:0})}else setStats(st)}setTimeout(()=>setScreen(s?.onboarded?'main':'onboarding'),300)},[]);
          useEffect(()=>{if(screen!=='loading'){save('settings',settings);save('decks',decks);save('stats',stats)}},[settings,decks,stats,screen]);
          useEffect(()=>{if(toast){const t=setTimeout(()=>setToast(null),3000);return()=>clearTimeout(t)}},[toast]);
          
          const showToast=(message,type='success')=>setToast({message,type});
          const generateFlashcards=async()=>{if(!settings.apiKey||!genTopic){setGenError('Please enter an API key and topic');return}setGenerating(true);setGenError('');try{const response=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${settings.apiKey}`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({contents:[{parts:[{text:`Generate exactly ${genCount} flashcards about "${genTopic}". Return ONLY a JSON array: [{"q": "Question?", "a": "Answer."}]`}]}]})});if(!response.ok)throw new Error('API request failed');const data=await response.json();const text=data.candidates[0].content.parts[0].text;const match=text.match(/\[[\s\S]*\]/);if(!match)throw new Error('Could not parse response');const cards=JSON.parse(match[0]);const newDeck={id:`ai-${Date.now()}`,name:genTopic,emoji:'ğŸ¤–',color:'#6366F1',subject:genTopic.toLowerCase(),cards:cards.map((c,i)=>({id:`ai-${Date.now()}-${i}`,q:c.q,a:c.a,repetitions:0,easeFactor:2.5,interval:0,nextReview:null}))};setDecks(prev=>[...prev,newDeck]);setModal(null);setGenTopic('');showToast(`Created ${cards.length} flashcards!`);haptic('medium')}catch(e){setGenError(e.message||'Failed to generate')}finally{setGenerating(false)}};
          const loadSampleDecks=subjects=>{const d=subjects.filter(s=>sampleDecks[s]).map(s=>({...sampleDecks[s],id:s,cards:sampleDecks[s].cards.map(c=>({...c,repetitions:0,easeFactor:2.5,interval:0,nextReview:null}))}));setDecks(d)};
          const startStudy=(deck=null)=>{let cards;if(deck){setCurrentDeck(deck);cards=getDueCards(deck.cards)}else{setCurrentDeck(null);cards=decks.flatMap(d=>getDueCards(d.cards))}cards=cards.sort(()=>Math.random()-0.5);if(cards.length===0){showToast('No cards due!','info');return}setStudyCards(cards);setCardIndex(0);setFlipped(false);setScreen('study');haptic('light')};
          const handleAnswer=correct=>{haptic(correct?'light':'medium');const card=studyCards[cardIndex];const updated=processReview(card,correct?4:1);setDecks(prev=>prev.map(d=>({...d,cards:d.cards.map(c=>c.id===card.id?updated:c)})));const today=new Date().toDateString();setStats(prev=>({...prev,todayReviewed:prev.todayReviewed+1,todayCorrect:prev.todayCorrect+(correct?1:0),totalReviewed:prev.totalReviewed+1,lastStudyDate:today,streak:prev.lastStudyDate===today?prev.streak:prev.streak+1}));if(cardIndex<studyCards.length-1){setCardIndex(prev=>prev+1);setFlipped(false)}else{setScreen('complete');haptic('medium')}};
          const addCard=()=>{if(!newCard.q||!newCard.a||!currentDeck)return;setDecks(prev=>prev.map(d=>d.id!==currentDeck.id?d:{...d,cards:[...d.cards,{id:`m-${Date.now()}`,q:newCard.q,a:newCard.a,repetitions:0,easeFactor:2.5,interval:0,nextReview:null}]}));setNewCard({q:'',a:''});setModal(null);showToast('Card added!');haptic('light')};
          const deleteDeck=id=>{setDecks(prev=>prev.filter(d=>d.id!==id));setModal(null);showToast('Deck deleted')};
          
          const totalCards=decks.reduce((s,d)=>s+d.cards.length,0);
          const dueCards=decks.flatMap(d=>getDueCards(d.cards)).length;
          const progress=settings.dailyGoal>0?Math.min(1,stats.todayReviewed/settings.dailyGoal):0;
          const accuracy=stats.todayReviewed>0?Math.round(stats.todayCorrect/stats.todayReviewed*100):0;
          const subjects=[{id:'biology',name:'Biology',emoji:'ğŸ§¬'},{id:'chemistry',name:'Chemistry',emoji:'âš—ï¸'},{id:'spanish',name:'Spanish',emoji:'ğŸ‡ªğŸ‡¸'},{id:'history',name:'History',emoji:'ğŸ“œ'},{id:'geography',name:'Geography',emoji:'ğŸŒ'},{id:'programming',name:'Programming',emoji:'ğŸ’»'}];
          
          if(screen==='loading')return(<div className="h-full gradient-primary flex items-center justify-center"><div className="text-center text-white"><div className="w-20 h-20 mx-auto mb-4 rounded-2xl bg-white/20 flex items-center justify-center animate-pulse"><span className="text-4xl">âš¡</span></div><p className="text-xl font-semibold">FlashLift</p></div></div>);
          
          if(screen==='onboarding'){
            if(step===0)return(<div className="h-full bg-gradient-to-b from-slate-50 to-slate-100 flex flex-col items-center justify-center p-8 safe-bottom"><div className="w-28 h-28 rounded-3xl gradient-primary flex items-center justify-center mb-8 shadow-2xl"><span className="text-6xl">âš¡</span></div><h1 className="text-4xl font-bold text-slate-800 mb-3">FlashLift</h1><p className="text-slate-500 text-center mb-8 text-lg">Learn in seconds with AI-powered flashcards</p><div className="space-y-4 w-full max-w-sm mb-10">{[['âš¡','Quick micro-learning'],['ğŸ§ ','Smart spaced repetition'],['ğŸ¤–','AI card generation']].map(([i,t],idx)=>(<div key={idx} className="flex items-center gap-4 bg-white p-4 rounded-2xl shadow-sm"><span className="text-2xl">{i}</span><span className="text-slate-700 font-medium">{t}</span></div>))}</div><button onClick={()=>{haptic('light');setStep(1)}} className="px-10 py-4 gradient-primary text-white rounded-2xl font-semibold text-lg shadow-lg active:scale-95 transition">Get Started â†’</button></div>);
            if(step===1)return(<div className="h-full bg-slate-50 p-6 flex flex-col safe-bottom"><div className="flex gap-2 mb-6">{[0,1,2,3].map(i=><div key={i} className={`h-1 flex-1 rounded ${i<=step?'bg-indigo-600':'bg-slate-200'}`}/>)}</div><h2 className="text-2xl font-bold text-slate-800 mb-2">What do you want to learn?</h2><p className="text-slate-500 mb-6">Pick subjects for sample flashcards</p><div className="flex flex-wrap gap-3 flex-1 content-start overflow-auto">{subjects.map(s=>(<button key={s.id} onClick={()=>{haptic('light');setSettings(p=>({...p,interests:p.interests.includes(s.id)?p.interests.filter(x=>x!==s.id):[...p.interests,s.id]}))}} className={`px-5 py-3 rounded-2xl flex items-center gap-2 text-lg transition-all active:scale-95 ${settings.interests.includes(s.id)?'gradient-primary text-white shadow-lg':'bg-white text-slate-700 shadow-sm'}`}><span>{s.emoji}</span><span>{s.name}</span></button>))}</div>{settings.interests.length>0&&<p className="text-indigo-600 font-medium my-4">{settings.interests.length} selected</p>}<div className="flex justify-between pt-4"><button onClick={()=>setStep(0)} className="text-slate-500 py-3">â† Back</button><button onClick={()=>{loadSampleDecks(settings.interests);setStep(2)}} disabled={!settings.interests.length} className="px-6 py-3 gradient-primary text-white rounded-xl font-semibold disabled:opacity-40 active:scale-95 transition">Continue â†’</button></div></div>);
            if(step===2)return(<div className="h-full bg-slate-50 p-6 flex flex-col safe-bottom"><div className="flex gap-2 mb-6">{[0,1,2,3].map(i=><div key={i} className={`h-1 flex-1 rounded ${i<=step?'bg-indigo-600':'bg-slate-200'}`}/>)}</div><div className="flex-1 flex flex-col items-center justify-center"><span className="text-7xl mb-6">ğŸ¯</span><h2 className="text-2xl font-bold text-slate-800 mb-2">Daily Goal</h2><p className="text-slate-500 mb-8">Cards per day</p><div className="flex items-center gap-8 mb-6"><button onClick={()=>{haptic('light');setSettings(p=>({...p,dailyGoal:Math.max(5,p.dailyGoal-5)}))}} className="w-14 h-14 rounded-full bg-white shadow-md text-2xl active:scale-95 transition">âˆ’</button><div className="text-center"><span className="text-6xl font-bold text-indigo-600">{settings.dailyGoal}</span><p className="text-slate-400">cards</p></div><button onClick={()=>{haptic('light');setSettings(p=>({...p,dailyGoal:Math.min(100,p.dailyGoal+5)}))}} className="w-14 h-14 rounded-full bg-white shadow-md text-2xl active:scale-95 transition">+</button></div><div className="flex gap-2">{[10,20,30,50].map(g=>(<button key={g} onClick={()=>{haptic('light');setSettings(p=>({...p,dailyGoal:g}))}} className={`px-4 py-2 rounded-full transition active:scale-95 ${settings.dailyGoal===g?'gradient-primary text-white':'bg-white text-slate-600'}`}>{g}</button>))}</div></div><div className="flex justify-between pt-4"><button onClick={()=>setStep(1)} className="text-slate-500 py-3">â† Back</button><button onClick={()=>setStep(3)} className="px-6 py-3 gradient-primary text-white rounded-xl font-semibold active:scale-95 transition">Continue â†’</button></div></div>);
            return(<div className="h-full bg-slate-50 p-6 flex flex-col safe-bottom"><div className="flex gap-2 mb-6">{[0,1,2,3].map(i=><div key={i} className={`h-1 flex-1 rounded ${i<=step?'bg-indigo-600':'bg-slate-200'}`}/>)}</div><div className="flex-1 flex flex-col items-center justify-center"><span className="text-7xl mb-6">ğŸ¤–</span><h2 className="text-2xl font-bold text-slate-800 mb-2">AI Generation</h2><p className="text-slate-500 mb-6 text-center">Add your Gemini API key to generate custom flashcards</p><input type="password" placeholder="AIzaSy..." value={settings.apiKey} onChange={e=>setSettings(p=>({...p,apiKey:e.target.value}))} className="w-full max-w-md px-4 py-3 rounded-xl border border-slate-200 focus:border-indigo-500 outline-none"/><p className="text-sm text-slate-400 mt-4 text-center">Optional - add later in settings</p></div><div className="flex justify-between pt-4"><button onClick={()=>setStep(2)} className="text-slate-500 py-3">â† Back</button><button onClick={()=>{setSettings(p=>({...p,onboarded:true}));setScreen('main');haptic('medium')}} className="px-8 py-4 gradient-primary text-white rounded-xl font-semibold text-lg active:scale-95 transition">Start Learning ğŸš€</button></div></div>);
          }
          
          if(screen==='study'){const card=studyCards[cardIndex];return(<div className="h-full bg-slate-50 flex flex-col"><div className="flex items-center justify-between p-4 bg-white border-b"><button onClick={()=>setScreen('main')} className="text-slate-400 text-2xl p-2">âœ•</button><span className="font-semibold text-slate-700">{cardIndex+1} / {studyCards.length}</span><div className="flex gap-3 text-sm"><span className="text-green-600 font-medium">âœ“{stats.todayCorrect}</span><span className="text-red-500 font-medium">âœ—{stats.todayReviewed-stats.todayCorrect}</span></div></div><div className="h-1 bg-slate-200"><div className="h-full bg-indigo-600 transition-all" style={{width:`${((cardIndex+1)/studyCards.length)*100}%`}}/></div><div className="flex-1 flex items-center justify-center p-6"><div onClick={()=>{if(!flipped){setFlipped(true);haptic('light')}}} className={`card-flip w-full max-w-sm aspect-[4/5] ${flipped?'flipped':''}`}><div className="card-front absolute inset-0 rounded-3xl shadow-2xl bg-white flex flex-col items-center justify-center p-8 text-center"><span className="text-5xl mb-6">â“</span><p className="text-xl font-medium text-slate-800 leading-relaxed">{card.q}</p><p className="text-slate-400 mt-8 text-sm">Tap to reveal</p></div><div className="card-back absolute inset-0 rounded-3xl shadow-2xl bg-green-50 border-2 border-green-400 flex flex-col items-center justify-center p-8 text-center"><span className="text-5xl mb-6">ğŸ’¡</span><p className="text-lg text-slate-700 leading-relaxed">{card.a}</p></div></div></div>{flipped&&<div className="flex justify-between px-8 text-sm text-slate-400"><span>â† Don't know</span><span>Know it â†’</span></div>}<div className="p-6 safe-bottom">{!flipped?(<button onClick={()=>{setFlipped(true);haptic('light')}} className="w-full py-4 gradient-primary text-white rounded-2xl font-semibold text-lg shadow-lg active:scale-95 transition">Show Answer</button>):(<div className="flex gap-4"><button onClick={()=>handleAnswer(false)} className="flex-1 py-4 border-2 border-red-400 text-red-500 rounded-2xl font-semibold active:scale-95 transition">âœ— Don't Know</button><button onClick={()=>handleAnswer(true)} className="flex-1 py-4 bg-green-500 text-white rounded-2xl font-semibold shadow-lg active:scale-95 transition">âœ“ Know It</button></div>)}</div></div>)}
          
          if(screen==='complete')return(<div className="h-full bg-slate-50 flex flex-col items-center justify-center p-8 safe-bottom"><div className="w-32 h-32 rounded-full gradient-success flex items-center justify-center mb-6 shadow-xl celebrate"><span className="text-6xl">ğŸ‰</span></div><h2 className="text-3xl font-bold text-slate-800 mb-2">Session Complete!</h2><p className="text-slate-500 mb-8">Amazing work!</p><div className="w-full max-w-sm bg-white rounded-3xl p-6 shadow-lg mb-8">{[['Cards',studyCards.length],['Correct',stats.todayCorrect,'#22C55E'],['Accuracy',`${Math.round(stats.todayCorrect/studyCards.length*100)}%`],['Streak',`${stats.streak} days`,'#F59E0B']].map(([l,v,c],i)=>(<div key={i} className="flex justify-between py-3 border-b border-slate-100 last:border-0"><span className="text-slate-500">{l}</span><span className="font-bold" style={{color:c}}>{v}</span></div>))}</div><button onClick={()=>{setScreen('main');setStudyCards([])}} className="px-10 py-4 gradient-primary text-white rounded-2xl font-semibold text-lg shadow-lg active:scale-95 transition">Done âœ“</button></div>);
          
          return(<div className="h-full bg-slate-50 flex flex-col">{toast&&(<div className={`fixed top-4 left-4 right-4 z-50 p-4 rounded-2xl shadow-lg text-white text-center font-medium ${toast.type==='success'?'bg-green-500':toast.type==='error'?'bg-red-500':'bg-indigo-500'}`}>{toast.message}</div>)}{modal&&(<div className="fixed inset-0 bg-black/50 z-40 flex items-end sm:items-center justify-center p-4" onClick={()=>setModal(null)}><div className="bg-white rounded-t-3xl sm:rounded-3xl p-6 w-full max-w-md max-h-[80vh] overflow-auto" onClick={e=>e.stopPropagation()}>{modal==='settings'&&(<><div className="flex justify-between items-center mb-6"><h3 className="text-xl font-bold">Settings</h3><button onClick={()=>setModal(null)} className="text-slate-400 text-2xl">âœ•</button></div><div className="space-y-6"><div><label className="block text-sm font-medium text-slate-700 mb-2">Daily Goal</label><input type="number" value={settings.dailyGoal} onChange={e=>setSettings(p=>({...p,dailyGoal:parseInt(e.target.value)||20}))} className="w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-indigo-500 outline-none"/></div><div><label className="block text-sm font-medium text-slate-700 mb-2">Gemini API Key</label><input type="password" placeholder="AIzaSy..." value={settings.apiKey} onChange={e=>setSettings(p=>({...p,apiKey:e.target.value}))} className="w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-indigo-500 outline-none"/></div><button onClick={()=>{if(confirm('Reset all data?')){localStorage.clear();location.reload()}}} className="w-full py-3 text-red-500 font-medium">Reset All Data</button></div></>)}{modal==='generate'&&(<><div className="flex justify-between items-center mb-6"><h3 className="text-xl font-bold">ğŸ¤– Generate Flashcards</h3><button onClick={()=>setModal(null)} className="text-slate-400 text-2xl">âœ•</button></div>{!settings.apiKey?(<div className="text-center py-6"><span className="text-4xl block mb-4">ğŸ”‘</span><p className="text-slate-600 mb-4">Add your API key first</p><button onClick={()=>setModal('settings')} className="px-6 py-2 gradient-primary text-white rounded-xl font-medium">Open Settings</button></div>):(<div className="space-y-4"><div><label className="block text-sm font-medium text-slate-700 mb-2">Topic</label><input type="text" placeholder="e.g., Quantum Physics, French Revolution..." value={genTopic} onChange={e=>setGenTopic(e.target.value)} className="w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-indigo-500 outline-none"/></div><div><label className="block text-sm font-medium text-slate-700 mb-2">Cards: {genCount}</label><input type="range" min="5" max="20" value={genCount} onChange={e=>setGenCount(parseInt(e.target.value))} className="w-full"/></div>{genError&&<p className="text-red-500 text-sm">{genError}</p>}<button onClick={generateFlashcards} disabled={generating||!genTopic} className="w-full py-4 gradient-primary text-white rounded-xl font-semibold disabled:opacity-50 flex items-center justify-center gap-2">{generating?<><span className="animate-spin">â³</span> Generating...</>:`Generate ${genCount} Cards`}</button></div>)}</>)}{modal==='addCard'&&currentDeck&&(<><div className="flex justify-between items-center mb-6"><h3 className="text-xl font-bold">Add Card</h3><button onClick={()=>setModal(null)} className="text-slate-400 text-2xl">âœ•</button></div><div className="space-y-4"><div><label className="block text-sm font-medium text-slate-700 mb-2">Question</label><textarea placeholder="What is...?" value={newCard.q} onChange={e=>setNewCard(p=>({...p,q:e.target.value}))} className="w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-indigo-500 outline-none resize-none" rows={3}/></div><div><label className="block text-sm font-medium text-slate-700 mb-2">Answer</label><textarea placeholder="The answer is..." value={newCard.a} onChange={e=>setNewCard(p=>({...p,a:e.target.value}))} className="w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-indigo-500 outline-none resize-none" rows={3}/></div><button onClick={addCard} disabled={!newCard.q||!newCard.a} className="w-full py-4 gradient-primary text-white rounded-xl font-semibold disabled:opacity-50">Add Card</button></div></>)}{modal?.startsWith('deck-')&&(()=>{const deck=decks.find(d=>d.id===modal.replace('deck-',''));if(!deck)return null;return(<><div className="flex items-center gap-3 mb-6"><span className="text-3xl">{deck.emoji}</span><h3 className="text-xl font-bold">{deck.name}</h3></div><div className="space-y-3"><button onClick={()=>{setModal(null);startStudy(deck)}} className="w-full py-3 gradient-primary text-white rounded-xl font-medium">Study Now</button><button onClick={()=>{setCurrentDeck(deck);setModal('addCard')}} className="w-full py-3 border border-slate-200 rounded-xl font-medium">Add Card</button><button onClick={()=>deleteDeck(deck.id)} className="w-full py-3 text-red-500 font-medium">Delete Deck</button></div></>)})()}</div></div>)}<div className="flex-1 overflow-auto">{tab==='home'&&(<div className="p-6"><div className="flex justify-between items-start mb-6"><div><p className="text-slate-400 text-sm">Welcome back</p><h1 className="text-2xl font-bold text-slate-800">Ready to learn? ğŸ“š</h1></div><div className="flex items-center gap-2">{stats.streak>0&&(<div className="flex items-center gap-1 px-3 py-1 bg-orange-100 rounded-full"><span>ğŸ”¥</span><span className="font-bold text-orange-600">{stats.streak}</span></div>)}<button onClick={()=>setModal('settings')} className="p-2 text-slate-400">âš™ï¸</button></div></div><div className="rounded-3xl p-6 mb-6 text-white shadow-xl gradient-primary"><div className="flex justify-between items-start mb-4"><div className="w-12 h-12 rounded-xl bg-white/20 flex items-center justify-center text-2xl">âš¡</div><span className="px-3 py-1 bg-white/20 rounded-full text-sm">{dueCards} due</span></div><h2 className="text-2xl font-bold mb-1">Study Session</h2><p className="text-white/70 mb-4">{totalCards} cards in {decks.length} decks</p><div className="mb-4"><div className="flex justify-between text-sm mb-2"><span className="text-white/60">Today</span><span>{stats.todayReviewed}/{settings.dailyGoal}</span></div><div className="h-2 bg-white/20 rounded-full"><div className="h-full bg-white rounded-full transition-all" style={{width:`${progress*100}%`}}/></div></div><button onClick={()=>startStudy()} disabled={dueCards===0} className="w-full py-3 bg-white text-indigo-600 rounded-xl font-semibold disabled:opacity-50 active:scale-95 transition">{dueCards>0?'Start Learning â†’':'No Cards Due'}</button></div><div className="grid grid-cols-3 gap-3 mb-6">{[['âœ“','Today',stats.todayReviewed,'#22C55E'],['%','Accuracy',stats.todayReviewed>0?`${accuracy}%`:'--','#06B6D4'],['ğŸ“š','Total',totalCards,'#8B5CF6']].map(([i,l,v,c],idx)=>(<div key={idx} className="bg-white p-4 rounded-2xl text-center shadow-sm"><span style={{color:c}}>{i}</span><p className="text-xl font-bold mt-1">{v}</p><p className="text-xs text-slate-400">{l}</p></div>))}</div><div className="grid grid-cols-2 gap-3 mb-6"><button onClick={()=>setModal('generate')} className="p-4 bg-white rounded-2xl shadow-sm flex items-center gap-3 active:scale-95 transition"><span className="text-2xl">ğŸ¤–</span><div className="text-left"><p className="font-semibold text-slate-800">Generate</p><p className="text-xs text-slate-400">AI flashcards</p></div></button><button onClick={()=>setTab('decks')} className="p-4 bg-white rounded-2xl shadow-sm flex items-center gap-3 active:scale-95 transition"><span className="text-2xl">ğŸ“š</span><div className="text-left"><p className="font-semibold text-slate-800">My Decks</p><p className="text-xs text-slate-400">{decks.length} decks</p></div></button></div>{decks.length>0&&(<><h3 className="font-semibold text-slate-800 mb-3">Recent Decks</h3><div className="space-y-3">{decks.slice(0,4).map(d=>(<button key={d.id} onClick={()=>setModal(`deck-${d.id}`)} className="w-full p-4 bg-white rounded-2xl flex items-center gap-4 shadow-sm active:scale-[0.98] transition text-left"><div className="w-12 h-12 rounded-xl flex items-center justify-center text-2xl" style={{backgroundColor:`${d.color}15`}}>{d.emoji}</div><div className="flex-1"><p className="font-semibold text-slate-800">{d.name}</p><p className="text-sm text-slate-400">{d.cards.length} cards â€¢ {getDueCards(d.cards).length} due</p></div><span className="text-indigo-500">â€º</span></button>))}</div></>)}</div>)}{tab==='decks'&&(<div className="p-6"><div className="flex justify-between items-center mb-6"><h1 className="text-2xl font-bold text-slate-800">My Decks</h1><button onClick={()=>setModal('generate')} className="px-4 py-2 gradient-primary text-white rounded-xl font-medium flex items-center gap-2 active:scale-95 transition"><span>ğŸ¤–</span> Generate</button></div>{decks.length===0?(<div className="text-center py-12"><span className="text-6xl block mb-4">ğŸ“š</span><p className="text-slate-600 mb-4">No decks yet</p><button onClick={()=>setModal('generate')} className="px-6 py-3 gradient-primary text-white rounded-xl font-medium">Create Your First Deck</button></div>):(<div className="space-y-4">{decks.map(d=>(<div key={d.id} className="bg-white rounded-2xl p-4 shadow-sm"><button onClick={()=>setModal(`deck-${d.id}`)} className="flex items-center gap-4 w-full text-left mb-3"><div className="w-14 h-14 rounded-xl flex items-center justify-center text-3xl" style={{backgroundColor:`${d.color}15`}}>{d.emoji}</div><div className="flex-1"><p className="font-semibold text-slate-800 text-lg">{d.name}</p><p className="text-sm text-slate-400">{d.cards.length} cards â€¢ {getDueCards(d.cards).length} due</p></div></button><div className="flex gap-2"><button onClick={()=>startStudy(d)} className="flex-1 py-2 gradient-primary text-white rounded-xl font-medium active:scale-95 transition">Study</button><button onClick={()=>{setCurrentDeck(d);setModal('addCard')}} className="px-4 py-2 border border-slate-200 rounded-xl active:scale-95 transition">+ Add</button></div></div>))}</div>)}</div>)}{tab==='stats'&&(<div className="p-6"><h1 className="text-2xl font-bold text-slate-800 mb-6">Statistics</h1><div className={`rounded-3xl p-6 mb-6 text-white ${stats.streak>0?'gradient-streak':'bg-slate-400'}`}><div className="flex items-center gap-4"><span className="text-5xl">ğŸ”¥</span><div><p className="text-5xl font-bold">{stats.streak}</p><p className="text-white/80">day streak</p></div></div></div><div className="grid grid-cols-2 gap-4 mb-6">{[['ğŸ“…','Today',stats.todayReviewed],['âœ“','Total Reviews',stats.totalReviewed],['ğŸ¯','Accuracy',`${accuracy}%`],['ğŸ“š','Total Cards',totalCards]].map(([i,l,v],idx)=>(<div key={idx} className="bg-white p-4 rounded-2xl shadow-sm"><span className="text-2xl">{i}</span><p className="text-2xl font-bold text-slate-800 mt-2">{v}</p><p className="text-sm text-slate-400">{l}</p></div>))}</div><h3 className="font-semibold text-slate-800 mb-3">By Deck</h3><div className="space-y-3">{decks.map(d=>(<div key={d.id} className="bg-white p-4 rounded-2xl shadow-sm"><div className="flex items-center gap-3 mb-2"><span className="text-xl">{d.emoji}</span><span className="font-medium text-slate-800">{d.name}</span></div><div className="flex gap-4 text-sm"><span className="text-slate-500">{d.cards.length} cards</span><span className="text-orange-500">{getDueCards(d.cards).length} due</span><span className="text-green-500">{d.cards.filter(c=>c.repetitions>=3).length} mastered</span></div></div>))}</div></div>)}</div><div className="bg-white border-t flex justify-around py-3 px-6 safe-bottom">{[['home','ğŸ ','Home'],['decks','ğŸ“š','Decks'],['stats','ğŸ“Š','Stats']].map(([id,icon,label])=>(<button key={id} onClick={()=>{haptic('light');setTab(id)}} className={`flex flex-col items-center px-4 py-1 rounded-xl transition ${tab===id?'text-indigo-600':'text-slate-400'}`}><span className="text-2xl">{icon}</span><span className="text-xs mt-1 font-medium">{label}</span></button>))}</div></div>);
        }
        ReactDOM.createRoot(document.getElementById('root')).render(<FlashLiftApp/>);
    </script>
</body>
</html>
